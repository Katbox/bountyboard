// Generated by CoffeeScript 1.3.3
(function() {
  var initiate_persona_login;

  initiate_persona_login = function() {
    return window.navigator.id.get(function(assertion) {
      if (assertion) {
        $('input[name=assertion]').val(assertion);
        return $('#browser_id_form').submit();
      } else {
        return window.location = "/sessions_controller#auth_failure";
      }
    });
  };

  $(document).ready(function() {
    $('.persona-login-button').click(function() {
      return $('#browser_id_form :submit').click();
	});
    return $('#browser_id_form button').click(function() {
      initiate_persona_login();
      return false;
    });
  });

}).call(this);
